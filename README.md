# PKU Grade Enhancement Script (v6.0)

这是一个用于美化北京大学成绩查询页面的 Tampermonkey (油猴) 脚本。它在恢复经典“红绿渐变”配色方案的同时，增加了强大的成绩模拟和可视化统计功能。

## 主要功能

### 1. 经典视觉体验
*   **红绿渐变配色**：恢复了经典的成绩着色方案，分数从 60 (红) 到 100 (绿) 平滑渐变，一目了然。
*   **彩虹特效**：当单科成绩达到 **100分** 时，该行背景会显示动态流动的彩虹特效。
*   **着色模式切换**：支持在“百分制着色”（60-100渐变）和“四分制着色”（GPA 1.0-4.0渐变）之间一键切换。

### 2. 成绩模拟系统
*   **实时模拟**：点击顶部的 **“开启模拟”** 按钮，所有成绩数字变为可编辑输入框。
*   **动态计算**：修改任意课程分数，学期 GPA、累计 GPA 以及所有统计图表都会 **实时自动更新**。
*   **预测分析**：帮助你轻松预测“如果这门课考了90分，我的总绩点会变成多少”。

### 3. 可视化统计图表
*   **多维度分析**：提供四种统计图表（支持一键显示/隐藏）：
    *   **学期 GPA 走势**：展示每个学期的成绩起伏。
    *   **累计 GPA 走势**：展示从入学至今的绩点变化趋势。
    *   **学期修读学分**：展示每个学期的工作量。
    *   **分数段分布**：统计各分数段（<60, 60-70, ... 90-100）的课程数量。
*   **交互式图表**：图表数据会随模拟成绩的修改而实时变化。

### 4. 实用增强
*   **自动计算**：自动计算并显示每个学期的加权平均分和 GPA。
*   **页脚修复**：在页面底部补充官方 GPA 计算公式说明。

## 安装指南

1.  **安装管理器**：确保你的浏览器已安装 **Tampermonkey** 扩展 (Chrome / Edge / Firefox / Safari)。
2.  **安装脚本**：
    *   点击脚本管理器图标，选择“添加新脚本”。
    *   将 `pku_grades_enhanced.user.js` 文件中的所有代码复制并粘贴到编辑器中。
    *   按 `Ctrl+S` (或 `Cmd+S`) 保存。
3.  **使用**：
    *   访问北大成绩查询页面（如 `treehole.pku.edu.cn` 或 `pkuhelper.pku.edu.cn`）。
    *   脚本将自动运行，你会在页面顶部看到新的控制按钮。

## 使用说明

*   **切换颜色模式**：点击顶部栏的 `四分制着色 / 百分制着色` 按钮。
*   **查看图表**：点击顶部栏的 `显示图表` 按钮，图表区域将以动画形式在页面底部展开。
*   **模拟成绩**：
    1.  点击醒目的 `开启模拟` 按钮（红色/绿色渐变按钮）。
    2.  直接在表格中修改课程分数。
    3.  观察 GPA 和图表的实时变化。
    4.  再次点击按钮退出模拟，恢复真实成绩。

## 注意事项

*   **隐私安全**：本脚本所有计算和修改均在**本地浏览器**进行，**绝对不会**上传任何个人数据到服务器。
*   **仅供参考**：模拟模式下的成绩修改仅为视觉效果，刷新页面后即消失，不会修改教务系统中的真实成绩。
*   **兼容性**：脚本针对特定的页面结构（DIV布局）进行了优化，如果学校更新了教务系统页面结构，脚本可能需要更新。

## 版本历史

*   **v6.0**: 
    *   重构核心逻辑，优化性能。
    *   新增“累计 GPA”和“学期学分”图表。
    *   修复图表时间轴顺序（旧->新）。
    *   优化模拟按钮样式，增加显眼的交互效果。
    *   增加图表显示/隐藏开关。
*   **v3.0 - v5.0**: 逐步完善配色逻辑、GPA计算公式及基础图表功能。

---
*Created for PKUers, by PKUers.*
